bun test v1.1.22-canary.96 (df33f2b2)

test/parser.test.ts:
(pass) Heading_1; [2.17ms]
(pass) Heading_1; by_char; [0.07ms]
(pass) Heading_1 with Line Italic; [0.10ms]
(pass) Heading_1 with Line Italic; by_char; [0.03ms]
(pass) Heading_1 after line break;
(pass) Heading_1 after line break; by_char; [0.10ms]
(pass) Heading_2; [0.04ms]
(pass) Heading_2; by_char;
(pass) Heading_2 with Line Italic;
(pass) Heading_2 with Line Italic; by_char; [0.03ms]
(pass) Heading_2 after line break; [0.11ms]
(pass) Heading_2 after line break; by_char; [0.04ms]
(pass) Heading_3; [0.07ms]
(pass) Heading_3; by_char; [0.06ms]
(pass) Heading_3 with Line Italic; [0.05ms]
(pass) Heading_3 with Line Italic; by_char; [0.11ms]
(pass) Heading_3 after line break; [0.08ms]
(pass) Heading_3 after line break; by_char; [0.13ms]
(pass) Heading_4;
(pass) Heading_4; by_char; [0.12ms]
(pass) Heading_4 with Line Italic; [0.04ms]
(pass) Heading_4 with Line Italic; by_char;
(pass) Heading_4 after line break;
(pass) Heading_4 after line break; by_char;
(pass) Heading_5;
(pass) Heading_5; by_char; [0.04ms]
(pass) Heading_5 with Line Italic;
(pass) Heading_5 with Line Italic; by_char;
(pass) Heading_5 after line break;
(pass) Heading_5 after line break; by_char;
(pass) Heading_6;
(pass) Heading_6; by_char;
(pass) Heading_6 with Line Italic;
(pass) Heading_6 with Line Italic; by_char; [0.13ms]
(pass) Heading_6 after line break;
(pass) Heading_6 after line break; by_char;
(pass) Line Breaks;
(pass) Line Breaks; by_char;
(pass) Line Breaks with Italic;
(pass) Line Breaks with Italic; by_char;
(pass) Escaped Line Breaks; [0.13ms]
(pass) Escaped Line Breaks; by_char; [0.03ms]
(pass) Paragraphs; [0.04ms]
(pass) Paragraphs; by_char;
(pass) Paragraph trim leading spaces;
(pass) Paragraph trim leading spaces; by_char;
(pass) Trim too many spaces;
(pass) Trim too many spaces; by_char;
(pass) Trim too many spaces in italic; [0.08ms]
(pass) Trim too many spaces in italic; by_char;
(pass) Horizontal Rule " ** *";
(pass) Horizontal Rule " ** *"; by_char;
(pass) Horizontal Rule " ** **";
(pass) Horizontal Rule " ** **"; by_char;
(pass) Horizontal Rule " ** ** *";
(pass) Horizontal Rule " ** ** *"; by_char;
(pass) Horizontal Rule " ** ** **";
(pass) Horizontal Rule " ** ** **"; by_char;
(pass) Horizontal Rule " -- -";
(pass) Horizontal Rule " -- -"; by_char;
(pass) Horizontal Rule " -- --"; [0.15ms]
(pass) Horizontal Rule " -- --"; by_char; [0.02ms]
(pass) Horizontal Rule " -- -- -";
(pass) Horizontal Rule " -- -- -"; by_char;
(pass) Horizontal Rule " -- -- --";
(pass) Horizontal Rule " -- -- --"; by_char;
(pass) Horizontal Rule " __ _";
(pass) Horizontal Rule " __ _"; by_char;
(pass) Horizontal Rule " __ __";
(pass) Horizontal Rule " __ __"; by_char;
(pass) Horizontal Rule " __ __ _"; [0.03ms]
(pass) Horizontal Rule " __ __ _"; by_char;
(pass) Horizontal Rule " __ __ __";
(pass) Horizontal Rule " __ __ __"; by_char;
(pass) Text after Horizontal Rule;
(pass) Text after Horizontal Rule; by_char;
(pass) Code Inline - 1 backticks; [0.12ms]
(pass) Code Inline - 1 backticks; by_char;
(pass) Code Inline trims spaces - 1 backticks;
(pass) Code Inline trims spaces - 1 backticks; by_char;
(pass) Code Inline x2 - 1 backticks;
(pass) Code Inline x2 - 1 backticks; by_char;
(pass) Code Inline - 2 backticks;
(pass) Code Inline - 2 backticks; by_char;
(pass) Code Inline trims spaces - 2 backticks;
(pass) Code Inline trims spaces - 2 backticks; by_char;
(pass) Code Inline x2 - 2 backticks;
(pass) Code Inline x2 - 2 backticks; by_char;
(pass) Code ` Inline - 2 backticks;
(pass) Code ` Inline - 2 backticks; by_char;
(pass) Code Inline - 3 backticks; [0.02ms]
(pass) Code Inline - 3 backticks; by_char;
(pass) Code Inline trims spaces - 3 backticks;
(pass) Code Inline trims spaces - 3 backticks; by_char;
(pass) Code Inline x2 - 3 backticks;
(pass) Code Inline x2 - 3 backticks; by_char;
(pass) Code ` Inline - 3 backticks; [0.10ms]
(pass) Code ` Inline - 3 backticks; by_char;
(pass) Code Inline - 4 backticks;
(pass) Code Inline - 4 backticks; by_char;
(pass) Code Inline trims spaces - 4 backticks;
(pass) Code Inline trims spaces - 4 backticks; by_char;
(pass) Code Inline x2 - 4 backticks;
(pass) Code Inline x2 - 4 backticks; by_char;
(pass) Code ` Inline - 4 backticks;
(pass) Code ` Inline - 4 backticks; by_char;
(pass) Code with line break - 1 backticks;
(pass) Code with line break - 1 backticks; by_char;
(pass) Code with two line breaks - 1 backticks;
(pass) Code with two line breaks - 1 backticks; by_char;
(pass) Code with line break - 2 backticks;
(pass) Code with line break - 2 backticks; by_char; [0.16ms]
(pass) Code with two line breaks - 2 backticks;
(pass) Code with two line breaks - 2 backticks; by_char;
(pass) Empty Code_Fence - 3 backticks;
(pass) Empty Code_Fence - 3 backticks; by_char;
(pass) Code_Fence - 3 backticks;
(pass) Code_Fence - 3 backticks; by_char; [0.05ms]
(pass) Code_Fence with language - 3 backticks;
(pass) Code_Fence with language - 3 backticks; by_char;
(pass) Code_Fence escaped backticks - 3 backticks;
(pass) Code_Fence escaped backticks - 3 backticks; by_char;
(pass) Code_Fence with unfinished end backticks - 3 backticks; [0.13ms]
(pass) Code_Fence with unfinished end backticks - 3 backticks; by_char;
(pass) Empty Code_Fence - 4 backticks;
(pass) Empty Code_Fence - 4 backticks; by_char;
(pass) Code_Fence - 4 backticks;
(pass) Code_Fence - 4 backticks; by_char;
(pass) Code_Fence with language - 4 backticks;
(pass) Code_Fence with language - 4 backticks; by_char;
(pass) Code_Fence escaped backticks - 4 backticks;
(pass) Code_Fence escaped backticks - 4 backticks; by_char;
(pass) Code_Fence with unfinished end backticks - 4 backticks;
(pass) Code_Fence with unfinished end backticks - 4 backticks; by_char;
(pass) Empty Code_Fence - 5 backticks;
(pass) Empty Code_Fence - 5 backticks; by_char;
(pass) Code_Fence - 5 backticks;
(pass) Code_Fence - 5 backticks; by_char;
(pass) Code_Fence with language - 5 backticks;
(pass) Code_Fence with language - 5 backticks; by_char;
(pass) Code_Fence escaped backticks - 5 backticks;
(pass) Code_Fence escaped backticks - 5 backticks; by_char;
(pass) Code_Fence with unfinished end backticks - 5 backticks;
(pass) Code_Fence with unfinished end backticks - 5 backticks; by_char;
(pass) Code_Block; indent: '    ';
(pass) Code_Block; indent: '    '; by_char;
(pass) Code_Block multiple lines; indent: '    ';
(pass) Code_Block multiple lines; indent: '    '; by_char;
(pass) Code_Block end; indent: '    '; [0.41ms]
(pass) Code_Block end; indent: '    '; by_char;
(pass) Code_Block; indent: '   \t';
(pass) Code_Block; indent: '   \t'; by_char;
(pass) Code_Block multiple lines; indent: '   \t';
(pass) Code_Block multiple lines; indent: '   \t'; by_char;
(pass) Code_Block end; indent: '   \t';
(pass) Code_Block end; indent: '   \t'; by_char; [0.11ms]
(pass) Code_Block; indent: '  \t';
(pass) Code_Block; indent: '  \t'; by_char;
(pass) Code_Block multiple lines; indent: '  \t';
(pass) Code_Block multiple lines; indent: '  \t'; by_char;
(pass) Code_Block end; indent: '  \t';
(pass) Code_Block end; indent: '  \t'; by_char;
(pass) Code_Block; indent: ' \t';
(pass) Code_Block; indent: ' \t'; by_char;
(pass) Code_Block multiple lines; indent: ' \t';
(pass) Code_Block multiple lines; indent: ' \t'; by_char;
(pass) Code_Block end; indent: ' \t';
(pass) Code_Block end; indent: ' \t'; by_char;
(pass) Code_Block; indent: '\t';
(pass) Code_Block; indent: '\t'; by_char;
(pass) Code_Block multiple lines; indent: '\t';
(pass) Code_Block multiple lines; indent: '\t'; by_char;
(pass) Code_Block end; indent: '\t';
(pass) Code_Block end; indent: '\t'; by_char;
(pass) Italic & Bold "**bold*bold>em***';
(pass) Italic & Bold "**bold*bold>em***'; by_char;
(pass) Italic & Bold "***bold>em*bold**';
(pass) Italic & Bold "***bold>em*bold**'; by_char;
(pass) Italic & Bold "*em**em>bold***'; [0.01ms]
(pass) Italic & Bold "*em**em>bold***'; by_char;
(pass) Italic & Bold "***bold>em**em*';
(pass) Italic & Bold "***bold>em**em*'; by_char;
(pass) Italic & Bold "__bold_bold>em___';
(pass) Italic & Bold "__bold_bold>em___'; by_char;
(pass) Italic & Bold "___bold>em_bold__';
(pass) Italic & Bold "___bold>em_bold__'; by_char;
(pass) Italic & Bold "_em__em>bold___';
(pass) Italic & Bold "_em__em>bold___'; by_char;
(pass) Italic & Bold "___bold>em__em_';
(pass) Italic & Bold "___bold>em__em_'; by_char; [0.03ms]
(pass) ItalicAst;
(pass) ItalicAst; by_char;
(pass) ItalicAst space after begin;
(pass) ItalicAst space after begin; by_char;
(pass) ItalicAst with Code;
(pass) ItalicAst with Code; by_char;
(pass) ItalicAst new Paragraph;
(pass) ItalicAst new Paragraph; by_char;
(pass) Escape ItalicAst Begin;
(pass) Escape ItalicAst Begin; by_char;
(pass) Escape ItalicAst End;
(pass) Escape ItalicAst End; by_char;
(pass) ItalicUnd;
(pass) ItalicUnd; by_char;
(pass) ItalicUnd space after begin;
(pass) ItalicUnd space after begin; by_char;
(pass) ItalicUnd with Code;
(pass) ItalicUnd with Code; by_char;
(pass) ItalicUnd new Paragraph;
(pass) ItalicUnd new Paragraph; by_char;
(pass) Escape ItalicUnd Begin;
(pass) Escape ItalicUnd Begin; by_char;
(pass) Escape ItalicUnd End;
(pass) Escape ItalicUnd End; by_char;
(pass) StrongAst;
(pass) StrongAst; by_char;
(pass) StrongAst space after begin;
(pass) StrongAst space after begin; by_char;
(pass) StrongAst with Code;
(pass) StrongAst with Code; by_char;
(pass) StrongAst new Paragraph; [0.14ms]
(pass) StrongAst new Paragraph; by_char;
(pass) Escape StrongAst Begin;
(pass) Escape StrongAst Begin; by_char;
(pass) Escape StrongAst End;
(pass) Escape StrongAst End; by_char;
(pass) StrongUnd;
(pass) StrongUnd; by_char;
(pass) StrongUnd space after begin;
(pass) StrongUnd space after begin; by_char;
(pass) StrongUnd with Code;
(pass) StrongUnd with Code; by_char;
(pass) StrongUnd new Paragraph; [0.07ms]
(pass) StrongUnd new Paragraph; by_char;
(pass) Escape StrongUnd Begin;
(pass) Escape StrongUnd Begin; by_char;
(pass) Escape StrongUnd End;
(pass) Escape StrongUnd End; by_char;
(pass) Strike;
(pass) Strike; by_char;
(pass) Strike space after begin;
(pass) Strike space after begin; by_char;
(pass) Strike with Code;
(pass) Strike with Code; by_char;
(pass) Strike new Paragraph;
(pass) Strike new Paragraph; by_char; [0.16ms]
(pass) Escape Strike Begin;
(pass) Escape Strike Begin; by_char;
(pass) Escape Strike End;
(pass) Escape Strike End; by_char;
(pass) Escape Backtick;
(pass) Escape Backtick; by_char;
(pass) Escape Backslash;
(pass) Escape Backslash; by_char;
(pass) Escape normal char;
(pass) Escape normal char; by_char;
(pass) Raw URL http://example.com/page;
(pass) Raw URL http://example.com/page; by_char; [0.08ms]
(pass) Raw URL in text http://example.com/page;
(pass) Raw URL in text http://example.com/page; by_char;
(pass) Doesn't match urls in text;
(pass) Doesn't match urls in text; by_char;
(pass) Raw URL https://example.com/page;
(pass) Raw URL https://example.com/page; by_char;
(pass) Raw URL in text https://example.com/page;
(pass) Raw URL in text https://example.com/page; by_char;
(pass) Doesn't match urls in text;
(pass) Doesn't match urls in text; by_char;
(pass) Doesn't match not_urls as urls;
(pass) Doesn't match not_urls as urls; by_char;
(pass) Link;
(pass) Link; by_char;
(pass) Link with code;
(pass) Link with code; by_char;
(pass) Link new paragraph;
(pass) Link new paragraph; by_char;
(pass) Image;
(pass) Image; by_char;
(pass) Image with code;
(pass) Image with code; by_char;
(pass) Link with Image; [0.44ms]
(pass) Link with Image; by_char;
(pass) Escaped link Begin;
(pass) Escaped link Begin; by_char;
(pass) Escaped link End;
(pass) Escaped link End; by_char;
(pass) Un-Escaped link Both;
(pass) Un-Escaped link Both; by_char;
(pass) Blockquote;
(pass) Blockquote; by_char;
(pass) Blockquote no-space;
(pass) Blockquote no-space; by_char;
(pass) Blockquote Escape; [0.03ms]
(pass) Blockquote Escape; by_char;
(pass) Blockquote line break; [0.03ms]
(pass) Blockquote line break; by_char;
(pass) Blockquote continued;
(pass) Blockquote continued; by_char;
(pass) Blockquote end; [0.07ms]
(pass) Blockquote end; by_char;
(pass) Blockquote heading;
(pass) Blockquote heading; by_char;
(pass) Blockquote codeblock;
(pass) Blockquote codeblock; by_char;
(pass) Blockquote blockquote;
(pass) Blockquote blockquote; by_char;
(pass) Blockquote up blockquote;
(pass) Blockquote up blockquote; by_char;
(pass) Blockquote blockquote down;
(pass) Blockquote blockquote down; by_char; [0.12ms]
(pass) Blockquote blockquote continued;
(pass) Blockquote blockquote continued; by_char;
(pass) Blockquote up down;
(pass) Blockquote up down; by_char;
(pass) Blockquote with code and line break;
(pass) Blockquote with code and line break; by_char;
(pass) List Unordered; prefix: *;
(pass) List Unordered; prefix: *; by_char;
(pass) List Unordered with italic; prefix: *;
(pass) List Unordered with italic; prefix: *; by_char;
(pass) List Unordered two items; prefix: *;
(pass) List Unordered two items; prefix: *; by_char;
(pass) List Unordered with line break; prefix: *;
(pass) List Unordered with line break; prefix: *; by_char;
(pass) List Unordered end; prefix: *;
(pass) List Unordered end; prefix: *; by_char;
(pass) List Unordered after line break; prefix: *;
(pass) List Unordered after line break; prefix: *; by_char;
(pass) List Unordered with unchecked task; prefix: *; [0.35ms]
(pass) List Unordered with unchecked task; prefix: *; by_char;
(pass) List Unordered with checked task; prefix: *;
(pass) List Unordered with checked task; prefix: *; by_char;
(pass) List Unordered with two tasks; prefix: *;
(pass) List Unordered with two tasks; prefix: *; by_char; [0.10ms]
(pass) List Unordered with link; prefix: *;
(pass) List Unordered with link; prefix: *; by_char; [0.03ms]
(pass) List Unordered nested list; prefix: *;
(pass) List Unordered nested list; prefix: *; by_char;
(pass) List Unordered failed nested list; prefix: *;
(pass) List Unordered failed nested list; prefix: *; by_char;
(pass) List Unordered nested ul multiple items; prefix: *; [0.08ms]
(pass) List Unordered nested ul multiple items; prefix: *; by_char;
(pass) List Unordered nested and un-nested; prefix: *;
(pass) List Unordered nested and un-nested; prefix: *; by_char; [0.07ms]
(pass) List Unordered; prefix: -;
(pass) List Unordered; prefix: -; by_char;
(pass) List Unordered with italic; prefix: -;
(pass) List Unordered with italic; prefix: -; by_char;
(pass) List Unordered two items; prefix: -;
(pass) List Unordered two items; prefix: -; by_char;
(pass) List Unordered with line break; prefix: -;
(pass) List Unordered with line break; prefix: -; by_char;
(pass) List Unordered end; prefix: -;
(pass) List Unordered end; prefix: -; by_char;
(pass) List Unordered after line break; prefix: -;
(pass) List Unordered after line break; prefix: -; by_char;
(pass) List Unordered with unchecked task; prefix: -;
(pass) List Unordered with unchecked task; prefix: -; by_char;
(pass) List Unordered with checked task; prefix: -;
(pass) List Unordered with checked task; prefix: -; by_char;
(pass) List Unordered with two tasks; prefix: -;
(pass) List Unordered with two tasks; prefix: -; by_char;
(pass) List Unordered with link; prefix: -;
(pass) List Unordered with link; prefix: -; by_char;
(pass) List Unordered nested list; prefix: -;
(pass) List Unordered nested list; prefix: -; by_char;
(pass) List Unordered failed nested list; prefix: -;
(pass) List Unordered failed nested list; prefix: -; by_char;
(pass) List Unordered nested ul multiple items; prefix: -;
(pass) List Unordered nested ul multiple items; prefix: -; by_char;
(pass) List Unordered nested and un-nested; prefix: -;
(pass) List Unordered nested and un-nested; prefix: -; by_char;
(pass) List Unordered; prefix: +;
(pass) List Unordered; prefix: +; by_char;
(pass) List Unordered with italic; prefix: +;
(pass) List Unordered with italic; prefix: +; by_char;
(pass) List Unordered two items; prefix: +;
(pass) List Unordered two items; prefix: +; by_char;
(pass) List Unordered with line break; prefix: +;
(pass) List Unordered with line break; prefix: +; by_char;
(pass) List Unordered end; prefix: +;
(pass) List Unordered end; prefix: +; by_char;
(pass) List Unordered after line break; prefix: +;
(pass) List Unordered after line break; prefix: +; by_char;
(pass) List Unordered with unchecked task; prefix: +;
(pass) List Unordered with unchecked task; prefix: +; by_char;
(pass) List Unordered with checked task; prefix: +;
(pass) List Unordered with checked task; prefix: +; by_char;
(pass) List Unordered with two tasks; prefix: +;
(pass) List Unordered with two tasks; prefix: +; by_char;
(pass) List Unordered with link; prefix: +;
(pass) List Unordered with link; prefix: +; by_char; [0.24ms]
(pass) List Unordered nested list; prefix: +;
(pass) List Unordered nested list; prefix: +; by_char;
(pass) List Unordered failed nested list; prefix: +;
(pass) List Unordered failed nested list; prefix: +; by_char;
(pass) List Unordered nested ul multiple items; prefix: +;
(pass) List Unordered nested ul multiple items; prefix: +; by_char;
(pass) List Unordered nested and un-nested; prefix: +;
(pass) List Unordered nested and un-nested; prefix: +; by_char;
(pass) List Ordered; prefix: 1.;
(pass) List Ordered; prefix: 1.; by_char;
(pass) List Ordered with italic; prefix: 1.;
(pass) List Ordered with italic; prefix: 1.; by_char;
(pass) List Ordered two items; prefix: 1.;
(pass) List Ordered two items; prefix: 1.; by_char;
(pass) List Ordered with line break; prefix: 1.;
(pass) List Ordered with line break; prefix: 1.; by_char;
(pass) List Ordered end; prefix: 1.;
(pass) List Ordered end; prefix: 1.; by_char;
(pass) List Ordered after line break; prefix: 1.;
(pass) List Ordered after line break; prefix: 1.; by_char; [0.26ms]
(pass) List Ordered with unchecked task; prefix: 1.;
(pass) List Ordered with unchecked task; prefix: 1.; by_char;
(pass) List Ordered with checked task; prefix: 1.;
(pass) List Ordered with checked task; prefix: 1.; by_char;
(pass) List Ordered with two tasks; prefix: 1.;
(pass) List Ordered with two tasks; prefix: 1.; by_char;
(pass) List Ordered with link; prefix: 1.;
(pass) List Ordered with link; prefix: 1.; by_char;
(pass) List Ordered nested list; prefix: 1.;
(pass) List Ordered nested list; prefix: 1.; by_char;
(pass) List Ordered failed nested list; prefix: 1.;
(pass) List Ordered failed nested list; prefix: 1.; by_char;
(pass) List Ordered nested ul multiple items; prefix: 1.;
(pass) List Ordered nested ul multiple items; prefix: 1.; by_char;
(pass) List Ordered nested and un-nested; prefix: 1.;
(pass) List Ordered nested and un-nested; prefix: 1.; by_char;
(pass) List Ordered; prefix: 420.;
(pass) List Ordered; prefix: 420.; by_char;
(pass) List Ordered with italic; prefix: 420.;
(pass) List Ordered with italic; prefix: 420.; by_char; [0.05ms]
(pass) List Ordered two items; prefix: 420.;
(pass) List Ordered two items; prefix: 420.; by_char;
(pass) List Ordered with line break; prefix: 420.;
(pass) List Ordered with line break; prefix: 420.; by_char;
(pass) List Ordered end; prefix: 420.;
(pass) List Ordered end; prefix: 420.; by_char;
(pass) List Ordered after line break; prefix: 420.;
(pass) List Ordered after line break; prefix: 420.; by_char;
(pass) List Ordered with unchecked task; prefix: 420.;
(pass) List Ordered with unchecked task; prefix: 420.; by_char;
(pass) List Ordered with checked task; prefix: 420.;
(pass) List Ordered with checked task; prefix: 420.; by_char;
(pass) List Ordered with two tasks; prefix: 420.;
(pass) List Ordered with two tasks; prefix: 420.; by_char; [0.21ms]
(pass) List Ordered with link; prefix: 420.;
(pass) List Ordered with link; prefix: 420.; by_char;
(pass) List Ordered nested list; prefix: 420.;
(pass) List Ordered nested list; prefix: 420.; by_char; [0.04ms]
(pass) List Ordered failed nested list; prefix: 420.;
(pass) List Ordered failed nested list; prefix: 420.; by_char;
(pass) List Ordered nested ul multiple items; prefix: 420.;
(pass) List Ordered nested ul multiple items; prefix: 420.; by_char;
(pass) List Ordered nested and un-nested; prefix: 420.;
(pass) List Ordered nested and un-nested; prefix: 420.; by_char;
(pass) Failed nesting of ul in ol;
(pass) Failed nesting of ul in ol; by_char;

test/ansi.test.ts:


[1mStreaming [22m[3m[1mMa[22m[23m[3m[1mrkdown[22m[23m

[35m[Image] [39m[34m[4mvers[24m[39m[34m[4mion[24m[39m [35m[Image] [39m[34m[4mgithub[24m[39m

[1mEx[22m[1mperiment making [22m[1ma streaming mark[22m[1mdown parser [22m[3m[1mÃ  l[22m[23m[3m[1ma ChatGPT.[22m[23m[2m[22m
[2m[22m
[2mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[22m

[1mInstallat[22m[1mion[22m

Install [100m[37mstr[39m[49m[100m[37meaming-markdown[39m[49m package from npm.

[100m[37mnpm [39m[49m[100m[37minstall streamin[39m[49m[100m[37mg-markdown[39m[49m

[3mOr just copy [23m[100m[37m[1m[34m[4m[3msmd.js[23m[24m[39m[37m[22m[39m[49m file to your project.

Or use the [34m[4mCDN link[24m[39m.

It's a minified [3m(3kB G[23m[3mzip)[23m version of the package, with only the necessary functions exported.

See the exports in [100m[37m[34m[4ms[24m[39m[37m[39m[49m[100m[37m[34m[4mmd_min_entry.js[24m[39m[37m[39m[49m.

The package uses ES module exports, so you need to use [100m[37mtype="mo[39m[49m[100m[37mdule"[39m[49m in your script tag.

[100m[37m<script type[39m[49m[100m[37m="module">[39m[49m
[100m[37m    i[39m[49m[100m[37mmport * as smd f[39m[49m[100m[37mrom "https://cdn[39m[49m[100m[37m.jsdelivr.net/np[39m[49m[100m[37mm/streaming-mark[39m[49m[100m[37mdown/smd.min.js"[39m[49m[100m[37m[39m[49m
[100m[37m    // ...[39m[49m
[100m[37m</sc[39m[49m[100m[37mript>[39m[49m

[1mU[22m[1msage[22m

First create new markdown [100m[37mParser[39m[49m by calling [100m[37mparser[39m[49m function.

It's single argument is a [100m[37mRenderer[39m[49m object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”[100m[37mde[39m[49m[100m[37mfault_renderer[39m[49m and [100m[37mlogger_rend[39m[49m[100m[37merer[39m[49mâ€”that you can try at first.

[100m[37mimport *[39m[49m[100m[37m as smd from "st[39m[49m[100m[37mreaming-markdown[39m[49m[100m[37m"[39m[49m
[100m[37m[39m[49m
[100m[37mconst element[39m[49m[100m[37m  = document.get[39m[49m[100m[37mElementById("mar[39m[49m[100m[37mkdown")[39m[49m
[100m[37mconst re[39m[49m[100m[37mnderer = smd.def[39m[49m[100m[37mault_renderer(el[39m[49m[100m[37mement)[39m[49m
[100m[37mconst par[39m[49m[100m[37mser   = smd.pars[39m[49m[100m[37mer(renderer)[39m[49m

[100m[37m[1mwrite[22m[39m[49m function

Then, you can start streaming markdown to the [100m[37mParser[39m[49m by calling [100m[37mparse[39m[49m[100m[37mr_write[39m[49m function with the chunk of markdown string.

[100m[37msmd.[39m[49m[100m[37mparser_write(par[39m[49m[100m[37mser, "# Streamin[39m[49m[100m[37mg Markdown\n\n")[39m[49m

[3mYou can [23m[3mwrite [23m[1m[3mas many [23m[22m[1m[3mtimes as you wan[23m[22m[1m[3mt[23m[22m to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. [100m[37m`print("hello w[39m[49m[100m[37mor[39m[49m should be rendered as [100m[37m<co[39m[49m[100m[37mde>print("hello[39m[49m[100m[37m wor</code>[39m[49m

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

[3m(The par[23m[3mser is only addi[23m[3mng new elements [23m[3mto the DOM, not [23m[3mmodifying the ex[23m[3misting ones.)[23m

[100m[37m[1mend[22m[39m[49m function

Finally, you can end the stream by calling [100m[37me[39m[49m[100m[37mnd[39m[49m function.

It will reset the [100m[37mParser[39m[49m state and flush the remaining markdown.

[100m[37msmd.par[39m[49m[100m[37mser_end(parser)[39m[49m

[1mMarkdow[22m[1mn features[22m

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  [9mAlternate synta[29m[9mx[29m [3m(not planne[23m[3md)[23m
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  [100m[37m`inline co[39m[49m[100m[37mde`[39m[49m with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces [100m[37mcode[39m[49m
 â€¢  [ ]  [3mitali[23m[3mc[23m with single asterisks
 â€¢  [ ]  [1mBold[22m with double asterisks
 â€¢  [ ]  [3mitalic[23m with underscores
 â€¢  [ ]  [1mBold[22m with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  [1mbold[22m[3m[1mbold>[22m[23m[3m[1mem[22m[23m
 â€¢  [ ]  [3m[1mbold>em[22m[23mbold
 â€¢  [ ]  [3mem[23m[1m[3mem>bold[23m[22m
 â€¢  [ ]  [3m[1mbold>em[22m[23m[3mem[23m
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough [9mexampl[29m[9me[29m
 â€¢  [ ]  Escape characters (e.g. * or _ with \* or \_)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  [100m[37mhref[39m[49m attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  [34m[4mhttp://example.c[24m[39m[34m[4mom[24m[39m
 â€¢  [ ]  [34m[4mhttps://example.com[24m[39m
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]  [34m[4mhttp://example.com[24m[39m
 â€¢  [ ]  [34m[4mhttps://example.com[24m[39m
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  [100m[37msr[39m[49m[100m[37mc[39m[49m attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With [100m[37m-[39m[49m[100m[37m--[39m[49m
 â€¢  [ ]  With [100m[37m***[39m[49m
 â€¢  [ ]  With [100m[37m___[39m[49m
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  [100m[37mstart[39m[49m attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. [100m[37m<di[39m[49m[100m[37mv>[39m[49m, [100m[37m<span>[39m[49m, [100m[37m<a>[39m[49m, [100m[37m<img>[39m[49m, etc.)30 |     return parser.renderer.data.buffer
31 |   }
32 | 
33 |   test("should correctly parse and render markdown with color", async () => {
34 |     const result = await testParser(true)
35 |     expect(result).toMatchSnapshot("force-color")
                        ^
error: expect(received).toMatchSnapshot(expected)

Expected: 
"

[1mStreaming [22m[3m[1mMa[22m[23m[3m[1mrkdown[22m[23m

[35m[Image] [39m[34m[4mvers[24m[39m[34m[4mion[24m[39m[34m (https://img.shields.io/npm/v/streaming-markdown?logo=npm)[39m[34m (https://www.npmjs.com/package/streaming-markdown)[39m [35m[Image] [39m[34m[4mgithub[24m[39m[34m (https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github)[39m[34m (https://github.com/thetarnav/streaming-markdown)[39m

[1mEx[22m[1mperiment making [22m[1ma streaming mark[22m[1mdown parser [22m[3m[1mÃ  l[22m[23m[3m[1ma ChatGPT.[22m[23m[2m[22m
[2m[22m
[2mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[22m

[1mInstallat[22m[1mion[22m

Install [100m[37mstr[39m[49m[100m[37meaming-markdown[39m[49m package from npm.

[100m[37mnpm [39m[49m[100m[37minstall streamin[39m[49m[100m[37mg-markdown[39m[49m

[3mOr just copy [23m[100m[37m[1m[34m[4m[3msmd.js[23m[24m[39m[37m[22m[39m[49m[34m (https://github.com/thetarnav/streaming-markdown/blob/main/smd.js)[39m file to your project.

Or use the [34m[4mCDN link[24m[39m[34m (https://www.jsdelivr.com/package/npm/streaming-markdown)[39m.

It's a minified [3m(3kB G[23m[3mzip)[23m version of the package, with only the necessary functions exported.

See the exports in [100m[37m[34m[4ms[24m[39m[37m[39m[49m[100m[37m[34m[4mmd_min_entry.js[24m[39m[37m[39m[49m[34m (https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js)[39m.

The package uses ES module exports, so you need to use [100m[37mtype="mo[39m[49m[100m[37mdule"[39m[49m in your script tag.

[100m[37m<script type[39m[49m[100m[37m="module">[39m[49m
[100m[37m    i[39m[49m[100m[37mmport * as smd f[39m[49m[100m[37mrom "https://cdn[39m[49m[100m[37m.jsdelivr.net/np[39m[49m[100m[37mm/streaming-mark[39m[49m[100m[37mdown/smd.min.js"[39m[49m[100m[37m[39m[49m
[100m[37m    // ...[39m[49m
[100m[37m</sc[39m[49m[100m[37mript>[39m[49m

[1mU[22m[1msage[22m

First create new markdown [100m[37mParser[39m[49m by calling [100m[37mparser[39m[49m function.

It's single argument is a [100m[37mRenderer[39m[49m object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”[100m[37mde[39m[49m[100m[37mfault_renderer[39m[49m and [100m[37mlogger_rend[39m[49m[100m[37merer[39m[49mâ€”that you can try at first.

[100m[37mimport *[39m[49m[100m[37m as smd from "st[39m[49m[100m[37mreaming-markdown[39m[49m[100m[37m"[39m[49m
[100m[37m[39m[49m
[100m[37mconst element[39m[49m[100m[37m  = document.get[39m[49m[100m[37mElementById("mar[39m[49m[100m[37mkdown")[39m[49m
[100m[37mconst re[39m[49m[100m[37mnderer = smd.def[39m[49m[100m[37mault_renderer(el[39m[49m[100m[37mement)[39m[49m
[100m[37mconst par[39m[49m[100m[37mser   = smd.pars[39m[49m[100m[37mer(renderer)[39m[49m

[100m[37m[1mwrite[22m[39m[49m function

Then, you can start streaming markdown to the [100m[37mParser[39m[49m by calling [100m[37mparse[39m[49m[100m[37mr_write[39m[49m function with the chunk of markdown string.

[100m[37msmd.[39m[49m[100m[37mparser_write(par[39m[49m[100m[37mser, "# Streamin[39m[49m[100m[37mg Markdown

")[39m[49m

[3mYou can [23m[3mwrite [23m[1m[3mas many [23m[22m[1m[3mtimes as you wan[23m[22m[1m[3mt[23m[22m to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. [100m[37m`print("hello w[39m[49m[100m[37mor[39m[49m should be rendered as [100m[37m<co[39m[49m[100m[37mde>print("hello[39m[49m[100m[37m wor</code>[39m[49m

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

[3m(The par[23m[3mser is only addi[23m[3mng new elements [23m[3mto the DOM, not [23m[3mmodifying the ex[23m[3misting ones.)[23m

[100m[37m[1mend[22m[39m[49m function

Finally, you can end the stream by calling [100m[37me[39m[49m[100m[37mnd[39m[49m function.

It will reset the [100m[37mParser[39m[49m state and flush the remaining markdown.

[100m[37msmd.par[39m[49m[100m[37mser_end(parser)[39m[49m

[1mMarkdow[22m[1mn features[22m

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  [9mAlternate synta[29m[9mx[29m [3m(not planne[23m[3md)[23m
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  [100m[37m`inline co[39m[49m[100m[37mde`[39m[49m with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces [100m[37mcode[39m[49m
 â€¢  [ ]  [3mitali[23m[3mc[23m with single asterisks
 â€¢  [ ]  [1mBold[22m with double asterisks
 â€¢  [ ]  [3mitalic[23m with underscores
 â€¢  [ ]  [1mBold[22m with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  [1mbold[22m[3m[1mbold>[22m[23m[3m[1mem[22m[23m
 â€¢  [ ]  [3m[1mbold>em[22m[23mbold
 â€¢  [ ]  [3mem[23m[1m[3mem>bold[23m[22m
 â€¢  [ ]  [3m[1mbold>em[22m[23m[3mem[23m
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough [9mexampl[29m[9me[29m
 â€¢  [ ]  Escape characters (e.g. * or _ with * or _)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  [100m[37mhref[39m[49m attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  [34m[4mhttp://example.c[24m[39m[34m (http://example.com)[39m[34m[4mom[24m[39m
 â€¢  [ ]  [34m[4mhttps://example.com[24m[39m[34m (https://example.com)[39m
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]  [34m (http://example.com)[39m[34m[4mhttp://example.com[24m[39m
 â€¢  [ ]  [34m (https://example.com)[39m[34m[4mhttps://example.com[24m[39m
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  [100m[37msr[39m[49m[100m[37mc[39m[49m attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With [100m[37m-[39m[49m[100m[37m--[39m[49m
 â€¢  [ ]  With [100m[37m***[39m[49m
 â€¢  [ ]  With [100m[37m___[39m[49m
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  [100m[37mstart[39m[49m attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. [100m[37m<di[39m[49m[100m[37mv>[39m[49m, [100m[37m<span>[39m[49m, [100m[37m<a>[39m[49m, [100m[37m<img>[39m[49m, etc.)"

Received: 
"

[1mStreaming [22m[3m[1mMa[22m[23m[3m[1mrkdown[22m[23m

[35m[Image] [39m[34m[4mvers[24m[39m[34m[4mion[24m[39m[34m (https://img.shields.io/npm/v/streaming-markdown?logo=npm)[39m[34m (https://www.npmjs.com/package/streaming-markdown)[39m [35m[Image] [39m[34m[4mgithub[24m[39m[34m (https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github)[39m[34m (https://github.com/thetarnav/streaming-markdown)[39m

[1mEx[22m[1mperiment making [22m[1ma streaming mark[22m[1mdown parser [22m[3m[1mÃ  l[22m[23m[3m[1ma ChatGPT.[22m[23m[2m[22m
[2m[22m
[2mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[22m

[1mInstallat[22m[1mion[22m

Install [100m[37mstr[39m[49m[100m[37meaming-markdown[39m[49m package from npm.

[100m[37mnpm [39m[49m[100m[37minstall streamin[39m[49m[100m[37mg-markdown[39m[49m

[3mOr just copy [23m[100m[37m[1m[34m[4m[3msmd.js[23m[24m[39m[37m[22m[39m[49m[34m (https://github.com/thetarnav/streaming-markdown/blob/main/smd.js)[39m file to your project.

Or use the [34m[4mCDN link[24m[39m[34m (https://www.jsdelivr.com/package/npm/streaming-markdown)[39m.

It's a minified [3m(3kB G[23m[3mzip)[23m version of the package, with only the necessary functions exported.

See the exports in [100m[37m[34m[4ms[24m[39m[37m[39m[49m[100m[37m[34m[4mmd_min_entry.js[24m[39m[37m[39m[49m[34m (https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js)[39m.

The package uses ES module exports, so you need to use [100m[37mtype="mo[39m[49m[100m[37mdule"[39m[49m in your script tag.

[100m[37m<script type[39m[49m[100m[37m="module">[39m[49m
[100m[37m    i[39m[49m[100m[37mmport * as smd f[39m[49m[100m[37mrom "https://cdn[39m[49m[100m[37m.jsdelivr.net/np[39m[49m[100m[37mm/streaming-mark[39m[49m[100m[37mdown/smd.min.js"[39m[49m[100m[37m[39m[49m
[100m[37m    // ...[39m[49m
[100m[37m</sc[39m[49m[100m[37mript>[39m[49m

[1mU[22m[1msage[22m

First create new markdown [100m[37mParser[39m[49m by calling [100m[37mparser[39m[49m function.

It's single argument is a [100m[37mRenderer[39m[49m object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”[100m[37mde[39m[49m[100m[37mfault_renderer[39m[49m and [100m[37mlogger_rend[39m[49m[100m[37merer[39m[49mâ€”that you can try at first.

[100m[37mimport *[39m[49m[100m[37m as smd from "st[39m[49m[100m[37mreaming-markdown[39m[49m[100m[37m"[39m[49m
[100m[37m[39m[49m
[100m[37mconst element[39m[49m[100m[37m  = document.get[39m[49m[100m[37mElementById("mar[39m[49m[100m[37mkdown")[39m[49m
[100m[37mconst re[39m[49m[100m[37mnderer = smd.def[39m[49m[100m[37mault_renderer(el[39m[49m[100m[37mement)[39m[49m
[100m[37mconst par[39m[49m[100m[37mser   = smd.pars[39m[49m[100m[37mer(renderer)[39m[49m

[100m[37m[1mwrite[22m[39m[49m function

Then, you can start streaming markdown to the [100m[37mParser[39m[49m by calling [100m[37mparse[39m[49m[100m[37mr_write[39m[49m function with the chunk of markdown string.

[100m[37msmd.[39m[49m[100m[37mparser_write(par[39m[49m[100m[37mser, "# Streamin[39m[49m[100m[37mg Markdown\n\n")[39m[49m

[3mYou can [23m[3mwrite [23m[1m[3mas many [23m[22m[1m[3mtimes as you wan[23m[22m[1m[3mt[23m[22m to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. [100m[37m\`print("hello w[39m[49m[100m[37mor[39m[49m should be rendered as [100m[37m<co[39m[49m[100m[37mde>print("hello[39m[49m[100m[37m wor</code>[39m[49m

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

[3m(The par[23m[3mser is only addi[23m[3mng new elements [23m[3mto the DOM, not [23m[3mmodifying the ex[23m[3misting ones.)[23m

[100m[37m[1mend[22m[39m[49m function

Finally, you can end the stream by calling [100m[37me[39m[49m[100m[37mnd[39m[49m function.

It will reset the [100m[37mParser[39m[49m state and flush the remaining markdown.

[100m[37msmd.par[39m[49m[100m[37mser_end(parser)[39m[49m

[1mMarkdow[22m[1mn features[22m

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  [9mAlternate synta[29m[9mx[29m [3m(not planne[23m[3md)[23m
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  [100m[37m\`inline co[39m[49m[100m[37mde\`[39m[49m with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces [100m[37mcode[39m[49m
 â€¢  [ ]  [3mitali[23m[3mc[23m with single asterisks
 â€¢  [ ]  [1mBold[22m with double asterisks
 â€¢  [ ]  [3mitalic[23m with underscores
 â€¢  [ ]  [1mBold[22m with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  [1mbold[22m[3m[1mbold>[22m[23m[3m[1mem[22m[23m
 â€¢  [ ]  [3m[1mbold>em[22m[23mbold
 â€¢  [ ]  [3mem[23m[1m[3mem>bold[23m[22m
 â€¢  [ ]  [3m[1mbold>em[22m[23m[3mem[23m
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough [9mexampl[29m[9me[29m
 â€¢  [ ]  Escape characters (e.g. * or _ with \* or \_)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  [100m[37mhref[39m[49m attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  [34m[4mhttp://example.c[24m[39m[34m (http://example.com)[39m[34m[4mom[24m[39m
 â€¢  [ ]  [34m[4mhttps://example.com[24m[39m[34m (https://example.com)[39m
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]  [34m (http://example.com)[39m[34m[4mhttp://example.com[24m[39m
 â€¢  [ ]  [34m (https://example.com)[39m[34m[4mhttps://example.com[24m[39m
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  [100m[37msr[39m[49m[100m[37mc[39m[49m attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With [100m[37m-[39m[49m[100m[37m--[39m[49m
 â€¢  [ ]  With [100m[37m***[39m[49m
 â€¢  [ ]  With [100m[37m___[39m[49m
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  [100m[37mstart[39m[49m attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. [100m[37m<di[39m[49m[100m[37mv>[39m[49m, [100m[37m<span>[39m[49m, [100m[37m<a>[39m[49m, [100m[37m<img>[39m[49m, etc.)"


      at /Users/lewis/Development/streaming-markdown/test/ansi.test.ts:35:20
(fail) Streaming Markdown Parser > should correctly parse and render markdown with color [5.97ms]


Streaming Markdown

[Image] version [Image] github

Experiment making a streaming markdown parser Ã  la ChatGPT.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Installation

Install streaming-markdown package from npm.

npm install streaming-markdown

Or just copy smd.js file to your project.

Or use the CDN link.

It's a minified (3kB Gzip) version of the package, with only the necessary functions exported.

See the exports in smd_min_entry.js.

The package uses ES module exports, so you need to use type="module" in your script tag.

<script type="module">
    import * as smd from "https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js"
    // ...
</script>

Usage

First create new markdown Parser by calling parser function.

It's single argument is a Renderer object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”default_renderer and logger_rendererâ€”that you can try at first.

import * as smd from "streaming-markdown"

const element  = document.getElementById("markdown")
const renderer = smd.default_renderer(element)
const parser   = smd.parser(renderer)

write function

Then, you can start streaming markdown to the Parser by calling parser_write function with the chunk of markdown string.

smd.parser_write(parser, "# Streaming Markdown\n\n")

You can write as many times as you want to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. `print("hello wor should be rendered as <code>print("hello wor</code>

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

(The parser is only adding new elements to the DOM, not modifying the existing ones.)

end function

Finally, you can end the stream by calling end function.

It will reset the Parser state and flush the remaining markdown.

smd.parser_end(parser)

Markdown features

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  Alternate syntax (not planned)
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  `inline code` with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces code
 â€¢  [ ]  italic with single asterisks
 â€¢  [ ]  Bold with double asterisks
 â€¢  [ ]  italic with underscores
 â€¢  [ ]  Bold with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  boldbold>em
 â€¢  [ ]  bold>embold
 â€¢  [ ]  emem>bold
 â€¢  [ ]  bold>emem
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough example
 â€¢  [ ]  Escape characters (e.g. * or _ with \* or \_)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  href attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  http://example.com
 â€¢  [ ]  https://example.com
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]  http://example.com
 â€¢  [ ]  https://example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  src attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With ---
 â€¢  [ ]  With ***
 â€¢  [ ]  With ___
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  start attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. <div>, <span>, <a>, <img>, etc.)35 |     expect(result).toMatchSnapshot("force-color")
36 |   })
37 | 
38 |   test("should correctly parse and render markdown without color", async () => {
39 |     const result = await testParser(false)
40 |     expect(result).toMatchSnapshot("force-no-color")
                        ^
error: expect(received).toMatchSnapshot(expected)

Expected: 
"

Streaming Markdown

[Image] version (https://img.shields.io/npm/v/streaming-markdown?logo=npm) (https://www.npmjs.com/package/streaming-markdown) [Image] github (https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github) (https://github.com/thetarnav/streaming-markdown)

Experiment making a streaming markdown parser Ã  la ChatGPT.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Installation

Install streaming-markdown package from npm.

npm install streaming-markdown

Or just copy smd.js (https://github.com/thetarnav/streaming-markdown/blob/main/smd.js) file to your project.

Or use the CDN link (https://www.jsdelivr.com/package/npm/streaming-markdown).

It's a minified (3kB Gzip) version of the package, with only the necessary functions exported.

See the exports in smd_min_entry.js (https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js).

The package uses ES module exports, so you need to use type="module" in your script tag.

<script type="module">
    import * as smd from "https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js"
    // ...
</script>

Usage

First create new markdown Parser by calling parser function.

It's single argument is a Renderer object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”default_renderer and logger_rendererâ€”that you can try at first.

import * as smd from "streaming-markdown"

const element  = document.getElementById("markdown")
const renderer = smd.default_renderer(element)
const parser   = smd.parser(renderer)

write function

Then, you can start streaming markdown to the Parser by calling parser_write function with the chunk of markdown string.

smd.parser_write(parser, "# Streaming Markdown

")

You can write as many times as you want to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. `print("hello wor should be rendered as <code>print("hello wor</code>

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

(The parser is only adding new elements to the DOM, not modifying the existing ones.)

end function

Finally, you can end the stream by calling end function.

It will reset the Parser state and flush the remaining markdown.

smd.parser_end(parser)

Markdown features

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  Alternate syntax (not planned)
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  `inline code` with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces code
 â€¢  [ ]  italic with single asterisks
 â€¢  [ ]  Bold with double asterisks
 â€¢  [ ]  italic with underscores
 â€¢  [ ]  Bold with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  boldbold>em
 â€¢  [ ]  bold>embold
 â€¢  [ ]  emem>bold
 â€¢  [ ]  bold>emem
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough example
 â€¢  [ ]  Escape characters (e.g. * or _ with * or _)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  href attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  http://example.c (http://example.com)om
 â€¢  [ ]  https://example.com (https://example.com)
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]   (http://example.com)http://example.com
 â€¢  [ ]   (https://example.com)https://example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  src attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With ---
 â€¢  [ ]  With ***
 â€¢  [ ]  With ___
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  start attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. <div>, <span>, <a>, <img>, etc.)"

Received: 
"

Streaming Markdown

[Image] version (https://img.shields.io/npm/v/streaming-markdown?logo=npm) (https://www.npmjs.com/package/streaming-markdown) [Image] github (https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github) (https://github.com/thetarnav/streaming-markdown)

Experiment making a streaming markdown parser Ã  la ChatGPT.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Installation

Install streaming-markdown package from npm.

npm install streaming-markdown

Or just copy smd.js (https://github.com/thetarnav/streaming-markdown/blob/main/smd.js) file to your project.

Or use the CDN link (https://www.jsdelivr.com/package/npm/streaming-markdown).

It's a minified (3kB Gzip) version of the package, with only the necessary functions exported.

See the exports in smd_min_entry.js (https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js).

The package uses ES module exports, so you need to use type="module" in your script tag.

<script type="module">
    import * as smd from "https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js"
    // ...
</script>

Usage

First create new markdown Parser by calling parser function.

It's single argument is a Renderer object, which is an interface to render the parsed markdown tokens to the DOM.

There are two built-in renderersâ€”default_renderer and logger_rendererâ€”that you can try at first.

import * as smd from "streaming-markdown"

const element  = document.getElementById("markdown")
const renderer = smd.default_renderer(element)
const parser   = smd.parser(renderer)

write function

Then, you can start streaming markdown to the Parser by calling parser_write function with the chunk of markdown string.

smd.parser_write(parser, "# Streaming Markdown\n\n")

You can write as many times as you want to stream the markdown.

The parser is optimistic.

When it sees the start of an inline code block or code block,

it will immediately style the element accordingly.

E.g. \`print("hello wor should be rendered as <code>print("hello wor</code>

While the text is streamed in, the user should be able to select the text that has already been streamed in and copy it.

(The parser is only adding new elements to the DOM, not modifying the existing ones.)

end function

Finally, you can end the stream by calling end function.

It will reset the Parser state and flush the remaining markdown.

smd.parser_end(parser)

Markdown features

 â€¢  [ ]  Paragraphs
 â€¢  [ ]  Line breaks

 â€¢  [ ]  don't end tokens
 â€¢  [ ]  Escaping line breaks
 â€¢  [ ]  Trim unnecessary spaces
 â€¢  [ ]  Headers

 â€¢  [ ]  Alternate syntax (not planned)
 â€¢  [ ]  Code Block with indent
 â€¢  [ ]  Code Block with triple backticks

 â€¢  [ ]  language attr
 â€¢  [ ]  with many backticks
 â€¢  [ ]  \`inline code\` with backticks

 â€¢  [ ]  with many backticks
 â€¢  [ ]  trim spaces code
 â€¢  [ ]  italic with single asterisks
 â€¢  [ ]  Bold with double asterisks
 â€¢  [ ]  italic with underscores
 â€¢  [ ]  Bold with double underscores
 â€¢  [ ]  Special cases:

 â€¢  [ ]  boldbold>em
 â€¢  [ ]  bold>embold
 â€¢  [ ]  emem>bold
 â€¢  [ ]  bold>emem
 â€¢  [ ]  * or _ cannot be surrounded by spaces
 â€¢  [ ]  Strikethrough example
 â€¢  [ ]  Escape characters (e.g. * or _ with \* or \_)
 â€¢  [ ]  [Link](url)

 â€¢  [ ]  href attr
 â€¢  [ ]  Raw URLs

 â€¢  [ ]  http://example.c (http://example.com)om
 â€¢  [ ]  https://example.com (https://example.com)
 â€¢  [ ]  www.example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Autolinks

 â€¢  [ ]  www.example.com
 â€¢  [ ]   (http://example.com)http://example.com
 â€¢  [ ]   (https://example.com)https://example.com
 â€¢  [ ]  example@fake.com
 â€¢  [ ]  mailto:example@fake.com
 â€¢  [ ]  Reference-style Links
 â€¢  [ ]  Images

 â€¢  [ ]  src attr
 â€¢  [ ]  Horizontal rules

 â€¢  [ ]  With ---
 â€¢  [ ]  With ***
 â€¢  [ ]  With ___
 â€¢  [ ]  Unordered lists
 â€¢  [ ]  Ordered lists

 â€¢  [ ]  start attr
 â€¢  [ ]  Task lists
 â€¢  [ ]  Nested lists
 â€¢  [ ]  One-line nested lists
 â€¢  [ ]  Adding Elements in Lists
 â€¢  [ ]  Blockquotes
 â€¢  [ ]  Tables
 â€¢  [ ]  Subscript
 â€¢  [ ]  Superscript
 â€¢  [ ]  Emoji Shortcodes
 â€¢  [ ]  Html tags (e.g. <div>, <span>, <a>, <img>, etc.)"


      at /Users/lewis/Development/streaming-markdown/test/ansi.test.ts:40:20
(fail) Streaming Markdown Parser > should correctly parse and render markdown without color [3.70ms]

2 tests failed:
(fail) Streaming Markdown Parser > should correctly parse and render markdown with color [5.97ms]
(fail) Streaming Markdown Parser > should correctly parse and render markdown without color [3.70ms]

 458 pass
 2 fail
 snapshots: 2 failed
 464 expect() calls
Ran 460 tests across 2 files. [55.00ms]
