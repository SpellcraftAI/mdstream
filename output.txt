bun test v1.1.22-canary.96 (df33f2b2)

test/tape.test.ts:
ADDTOKEN Heading1
ADDTEXT "Streaming "
ADDTOKEN ItalicAst
ADDTEXT "Markdown"
ENDTOKEN ItalicAst
ENDTOKEN Heading1
ADDTOKEN Paragraph
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT "version"
SETATTR src https://img.shields.io/npm/v/streaming-markdown?logo=npm
ENDTOKEN Image
SETATTR href https://www.npmjs.com/package/streaming-markdown
ENDTOKEN Link
ADDTEXT " "
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT "github"
SETATTR src https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github
ENDTOKEN Image
SETATTR href https://github.com/thetarnav/streaming-markdown
ENDTOKEN Link
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT "Internal fork. Original:"
ENDTOKEN ItalicAst
ADDTEXT " "
ADDTOKEN RawUrl
SETATTR href https://github.com/thetarnav/streaming-markdown
ADDTEXT "https://github.com/thetarnav/streaming-markdown"
ENDTOKEN RawUrl
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTOKEN StrongAst
ADDTEXT "Experiment making a streaming markdown parser "
ADDTOKEN ItalicAst
ADDTEXT "à la ChatGPT."
ENDTOKEN ItalicAst
ENDTOKEN StrongAst
ENDTOKEN Paragraph
ADDTOKEN Rule
ENDTOKEN Rule
ADDTOKEN Heading2
ADDTEXT "Installation"
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT "I"
ADDTEXT "nstall "
ADDTOKEN CodeInline
ADDTEXT "streaming-markdown"
ENDTOKEN CodeInline
ADDTEXT " package from npm."
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang bash
ADDTEXT "npm install streaming-markdown"
ENDTOKEN CodeFence
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT "Or just copy "
ADDTOKEN Link
ADDTOKEN StrongAst
ADDTOKEN CodeInline
ADDTEXT "smd.js"
ENDTOKEN CodeInline
ENDTOKEN StrongAst
SETATTR href https://github.com/thetarnav/streaming-markdown/blob/main/smd.js
ENDTOKEN Link
ADDTEXT " file to your project."
ENDTOKEN ItalicAst
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTEXT "O"
ADDTEXT "r use the "
ADDTOKEN Link
ADDTEXT "CDN link"
SETATTR href https://www.jsdelivr.com/package/npm/streaming-markdown
ENDTOKEN Link
ADDTEXT "."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "I"
ADDTEXT "t's a minified "
ADDTOKEN ItalicAst
ADDTEXT "(3kB Gzip)"
ENDTOKEN ItalicAst
ADDTEXT " version of the package, with only the necessary functions exported."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "S"
ADDTEXT "ee the exports in "
ADDTOKEN Link
ADDTOKEN CodeInline
ADDTEXT "smd_min_entry.js"
ENDTOKEN CodeInline
SETATTR href https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js
ENDTOKEN Link
ADDTEXT "."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "T"
ADDTEXT "he package uses ES module exports, so you need to use "
ADDTOKEN CodeInline
ADDTEXT "type=\"module\""
ENDTOKEN CodeInline
ADDTEXT " in your script tag."
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang html
ADDTEXT "<script type=\"module\">\n    import * as smd from \"https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js\"\n    // ...\n</script>"
ENDTOKEN CodeFence
ADDTOKEN Heading2
ADDTEXT "Usage"
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT "F"
ADDTEXT "irst create new markdown "
ADDTOKEN CodeInline
ADDTEXT "Parser"
ENDTOKEN CodeIn
12 |   const start = parsed.slice(0, 3000)
13 |   // const end = parsed.slice(3000)
14 | 
15 |   console.log(start)
16 | 
17 |   expect(start).toMatchSnapshot("parser-start")
                     ^
error: expect(received).toMatchSnapshot(expected)

Expected: 
"ADDTOKEN Heading1
ADDTEXT Streaming 
ADDTOKEN ItalicAst
ADDTEXT Markdown
ENDTOKEN ItalicAst
ENDTOKEN Heading1
ADDTOKEN Paragraph
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT version
SETATTR src
https://img.shields.io/npm/v/streaming-markdown?logo=npmENDTOKEN Image
SETATTR href
https://www.npmjs.com/package/streaming-markdownENDTOKEN Link
ADDTEXT  
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT github
SETATTR src
https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=githubENDTOKEN Image
SETATTR href
https://github.com/thetarnav/streaming-markdownENDTOKEN Link
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT Internal fork. Original:
ENDTOKEN ItalicAst
ADDTEXT  
ADDTOKEN RawUrl
SETATTR href
https://github.com/thetarnav/streaming-markdownADDTEXT https://github.com/thetarnav/streaming-markdown
ENDTOKEN RawUrl
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTOKEN StrongAst
ADDTEXT Experiment making a streaming markdown parser 
ADDTOKEN ItalicAst
ADDTEXT à la ChatGPT.
ENDTOKEN ItalicAst
ENDTOKEN StrongAst
ENDTOKEN Paragraph
ADDTOKEN Rule
ENDTOKEN Rule
ADDTOKEN Heading2
ADDTEXT Installation
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT I
ADDTEXT nstall 
ADDTOKEN CodeInline
ADDTEXT streaming-markdown
ENDTOKEN CodeInline
ADDTEXT  package from npm.
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang
bashADDTEXT npm install streaming-markdown
ENDTOKEN CodeFence
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT Or just copy 
ADDTOKEN Link
ADDTOKEN StrongAst
ADDTOKEN CodeInline
ADDTEXT smd.js
ENDTOKEN CodeInline
ENDTOKEN StrongAst
SETATTR href
https://github.com/thetarnav/streaming-markdown/blob/main/smd.jsENDTOKEN Link
ADDTEXT  file to your project.
ENDTOKEN ItalicAst
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTEXT O
ADDTEXT r use the 
ADDTOKEN Link
ADDTEXT CDN link
SETATTR href
https://www.jsdelivr.com/package/npm/streaming-markdownENDTOKEN Link
ADDTEXT .
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT I
ADDTEXT t's a minified 
ADDTOKEN ItalicAst
ADDTEXT (3kB Gzip)
ENDTOKEN ItalicAst
ADDTEXT  version of the package, with only the necessary functions exported.
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT S
ADDTEXT ee the exports in 
ADDTOKEN Link
ADDTOKEN CodeInline
ADDTEXT smd_min_entry.js
ENDTOKEN CodeInline
SETATTR href
https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.jsENDTOKEN Link
ADDTEXT .
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT T
ADDTEXT he package uses ES module exports, so you need to use 
ADDTOKEN CodeInline
ADDTEXT type="module"
ENDTOKEN CodeInline
ADDTEXT  in your script tag.
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang
htmlADDTEXT <script type="module">
    import * as smd from "https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js"
    // ...
</script>
ENDTOKEN CodeFence
ADDTOKEN Heading2
ADDTEXT Usage
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT F
ADDTEXT irst create new markdown 
ADDTOKEN CodeInline
ADDTEXT Parser
ENDTOKEN CodeInline
ADDTEXT  by calling 
ADDTOKEN CodeInline
ADDTEXT parser
ENDTOKEN CodeInline
ADDTEXT  function."

Received: 
"ADDTOKEN Heading1
ADDTEXT "Streaming "
ADDTOKEN ItalicAst
ADDTEXT "Markdown"
ENDTOKEN ItalicAst
ENDTOKEN Heading1
ADDTOKEN Paragraph
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT "version"
SETATTR src https://img.shields.io/npm/v/streaming-markdown?logo=npm
ENDTOKEN Image
SETATTR href https://www.npmjs.com/package/streaming-markdown
ENDTOKEN Link
ADDTEXT " "
ADDTOKEN Link
ADDTOKEN Image
ADDTEXT "github"
SETATTR src https://img.shields.io/badge/GitHub-streaming--markdown-orange?logo=github
ENDTOKEN Image
SETATTR href https://github.com/thetarnav/streaming-markdown
ENDTOKEN Link
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT "Internal fork. Original:"
ENDTOKEN ItalicAst
ADDTEXT " "
ADDTOKEN RawUrl
SETATTR href https://github.com/thetarnav/streaming-markdown
ADDTEXT "https://github.com/thetarnav/streaming-markdown"
ENDTOKEN RawUrl
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTOKEN StrongAst
ADDTEXT "Experiment making a streaming markdown parser "
ADDTOKEN ItalicAst
ADDTEXT "à la ChatGPT."
ENDTOKEN ItalicAst
ENDTOKEN StrongAst
ENDTOKEN Paragraph
ADDTOKEN Rule
ENDTOKEN Rule
ADDTOKEN Heading2
ADDTEXT "Installation"
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT "I"
ADDTEXT "nstall "
ADDTOKEN CodeInline
ADDTEXT "streaming-markdown"
ENDTOKEN CodeInline
ADDTEXT " package from npm."
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang bash
ADDTEXT "npm install streaming-markdown"
ENDTOKEN CodeFence
ADDTOKEN Paragraph
ADDTOKEN ItalicAst
ADDTEXT "Or just copy "
ADDTOKEN Link
ADDTOKEN StrongAst
ADDTOKEN CodeInline
ADDTEXT "smd.js"
ENDTOKEN CodeInline
ENDTOKEN StrongAst
SETATTR href https://github.com/thetarnav/streaming-markdown/blob/main/smd.js
ENDTOKEN Link
ADDTEXT " file to your project."
ENDTOKEN ItalicAst
ENDTOKEN Paragraph
ADDTOKEN Paragraph
ADDTEXT "O"
ADDTEXT "r use the "
ADDTOKEN Link
ADDTEXT "CDN link"
SETATTR href https://www.jsdelivr.com/package/npm/streaming-markdown
ENDTOKEN Link
ADDTEXT "."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "I"
ADDTEXT "t's a minified "
ADDTOKEN ItalicAst
ADDTEXT "(3kB Gzip)"
ENDTOKEN ItalicAst
ADDTEXT " version of the package, with only the necessary functions exported."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "S"
ADDTEXT "ee the exports in "
ADDTOKEN Link
ADDTOKEN CodeInline
ADDTEXT "smd_min_entry.js"
ENDTOKEN CodeInline
SETATTR href https://github.com/thetarnav/streaming-markdown/blob/main/smd_min_entry.js
ENDTOKEN Link
ADDTEXT "."
ADDTOKEN LineBreak
ENDTOKEN Rule
ADDTEXT "T"
ADDTEXT "he package uses ES module exports, so you need to use "
ADDTOKEN CodeInline
ADDTEXT "type=\"module\""
ENDTOKEN CodeInline
ADDTEXT " in your script tag."
ENDTOKEN Paragraph
ADDTOKEN CodeFence
SETATTR lang html
ADDTEXT "<script type=\"module\">\n    import * as smd from \"https://cdn.jsdelivr.net/npm/streaming-markdown/smd.min.js\"\n    // ...\n</script>"
ENDTOKEN CodeFence
ADDTOKEN Heading2
ADDTEXT "Usage"
ENDTOKEN Heading2
ADDTOKEN Paragraph
ADDTEXT "F"
ADDTEXT "irst create new markdown "
ADDTOKEN CodeInline
ADDTEXT "Parser"
ENDTOKEN CodeIn"


      at /Users/lewis/Development/streaming-markdown/test/tape.test.ts:17:17
(fail) Tape of parser operations should match [28.11ms]

 0 pass
 1 fail
 snapshots: 1 failed
 1 expect() calls
Ran 1 tests across 1 files. [175.00ms]
